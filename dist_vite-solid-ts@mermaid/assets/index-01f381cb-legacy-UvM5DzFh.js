!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e=function(){return n};var r,n={},i=Object.prototype,a=i.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",d=c.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(r){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new D(n||[]);return o(a,"_invoke",{value:C(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}n.wrap=f;var g="suspendedStart",p="suspendedYield",v="executing",y="completed",w={};function m(){}function b(){}function x(){}var E={};l(E,s,(function(){return this}));var S=Object.getPrototypeOf,N=S&&S(S(G([])));N&&N!==i&&a.call(N,s)&&(E=N);var L=x.prototype=m.prototype=Object.create(E);function O(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function X(e,r){function n(i,o,c,s){var u=h(e[i],e,o);if("throw"!==u.type){var d=u.arg,l=d.value;return l&&"object"==t(l)&&a.call(l,"__await")?r.resolve(l.__await).then((function(t){n("next",t,c,s)}),(function(t){n("throw",t,c,s)})):r.resolve(l).then((function(t){d.value=t,c(d)}),(function(t){return n("throw",t,c,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,e){function a(){return new r((function(r,i){n(t,e,r,i)}))}return i=i?i.then(a,a):a()}})}function C(t,e,n){var i=g;return function(a,o){if(i===v)throw Error("Generator is already running");if(i===y){if("throw"===a)throw o;return{value:r,done:!0}}for(n.method=a,n.arg=o;;){var c=n.delegate;if(c){var s=T(c,n);if(s){if(s===w)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===g)throw i=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=v;var u=h(t,e,n);if("normal"===u.type){if(i=n.done?y:p,u.arg===w)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i=y,n.method="throw",n.arg=u.arg)}}}function T(t,e){var n=e.method,i=t.iterator[n];if(i===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=r,T(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),w;var a=h(i,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,w;var o=a.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,w):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,w)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function G(e){if(e||""===e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function t(){for(;++i<e.length;)if(a.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=r,t.done=!0,t};return o.next=o}}throw new TypeError(t(e)+" is not iterable")}return b.prototype=x,o(L,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:b,configurable:!0}),b.displayName=l(x,d,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,l(t,d,"GeneratorFunction")),t.prototype=Object.create(L),t},n.awrap=function(t){return{__await:t}},O(X.prototype),l(X.prototype,u,(function(){return this})),n.AsyncIterator=X,n.async=function(t,e,r,i,a){void 0===a&&(a=Promise);var o=new X(f(t,e,r,i),a);return n.isGeneratorFunction(e)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},O(L),l(L,d,"Generator"),l(L,s,(function(){return this})),l(L,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},n.values=G,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,i){return c.type="throw",c.arg=t,e.next=n,i&&(e.method="next",e.arg=r),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],c=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=a.call(o,"catchLoc"),u=a.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,w):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),w},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),w}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;k(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:G(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),w}},n}function r(t,e,r,n,i,a,o){try{var c=t[a](o),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,i)}function n(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var o=t.apply(e,n);function c(t){r(o,i,a,c,s,"next",t)}function s(t){r(o,i,a,c,s,"throw",t)}c(void 0)}))}}function i(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=o(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return c=t.done,t},e:function(t){s=!0,a=t},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}function a(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||o(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){if(t){if("string"==typeof t)return c(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}System.register(["./graph-legacy-BailboTS.js","./layout-legacy-DUr8EV8T.js","./clone-legacy-Cn3oQDhN.js","./edges-066a5561-legacy-Bvov2qHu.js","./index-legacy-1oTS4qUV.js","./createText-ca0c5216-legacy-Ex0PljXK.js"],(function(t,r){"use strict";var o,c,s,u,d,l,f,h,g,p,v,y,w,m,b,x,E,S,N,L,O,X,C;return{setters:[function(t){o=t.i,c=t.G},function(t){s=t.m,u=t.l},function(t){d=t.c},function(t){l=t.i,f=t.u,h=t.s,g=t.a,p=t.b,v=t.g,y=t.p,w=t.c,m=t.d,b=t.e,x=t.f,E=t.h,S=t.j},function(t){N=t.l,L=t.c,O=t.p,X=t.h},function(t){C=t.a}],execute:function(){function r(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:T(t),edges:j(t)};return o(t.graph())||(e.value=d(t.graph())),e}function T(t){return s(t.nodes(),(function(e){var r=t.node(e),n=t.parent(e),i={v:e};return o(r)||(i.value=r),o(n)||(i.parent=n),i}))}function j(t){return s(t.edges(),(function(e){var r=t.edge(e),n={v:e.v,w:e.w};return o(e.name)||(n.name=e.name),o(r)||(n.value=r),n}))}var k={},D={},G={},B=function(t,e){return N.trace("In isDescendant",e," ",t," = ",D[e].includes(t)),!!D[e].includes(t)},I=function t(e,r,n,i){N.warn("Copying children of ",e,"root",i,"data",r.node(e),i);var a=r.children(e)||[];e!==i&&a.push(e),N.warn("Copying (nodes) clusterId",e,"nodes",a),a.forEach((function(a){if(r.children(a).length>0)t(a,r,n,i);else{var o=r.node(a);N.info("cp ",a," to ",i," with parent ",e),n.setNode(a,o),i!==r.parent(a)&&(N.warn("Setting parent",a,r.parent(a)),n.setParent(a,r.parent(a))),e!==i&&a!==e?(N.debug("Setting parent",a,e),n.setParent(a,e)):(N.info("In copy ",e,"root",i,"data",r.node(e),i),N.debug("Not Setting parent for node=",a,"cluster!==rootId",e!==i,"node!==clusterId",a!==e));var c=r.edges(a);N.debug("Copying Edges",c),c.forEach((function(t){N.info("Edge",t);var a=r.edge(t.v,t.w,t.name);N.info("Edge data",a,i);try{!function(t,e){return N.info("Descendants of ",e," is ",D[e]),N.info("Edge is ",t),t.v!==e&&t.w!==e&&(D[e]?D[e].includes(t.v)||B(t.v,e)||B(t.w,e)||D[e].includes(t.w):(N.debug("Tilt, ",e,",not in descendants"),!1))}(t,i)?N.info("Skipping copy of edge ",t.v,"--\x3e",t.w," rootId: ",i," clusterId:",e):(N.info("Copying as ",t.v,t.w,a,t.name),n.setEdge(t.v,t.w,a,t.name),N.info("newGraph edges ",n.edges(),n.edge(n.edges()[0])))}catch(o){N.error(o)}}))}N.debug("Removing node",a),r.removeNode(a)}))},P=function t(e,r){var n,o=r.children(e),c=a(o),s=i(o);try{for(s.s();!(n=s.n()).done;){var u=n.value;G[u]=e,c=[].concat(a(c),a(t(u,r)))}}catch(d){s.e(d)}finally{s.f()}return c},_=function t(e,r){N.trace("Searching",e);var n=r.children(e);if(N.trace("Searching children of id ",e,n),n.length<1)return N.trace("This is a valid node",e),e;var a,o=i(n);try{for(o.s();!(a=o.n()).done;){var c=t(a.value,r);if(c)return N.trace("Found replacement for",e," => ",c),c}}catch(s){o.e(s)}finally{o.f()}},F=function(t){return k[t]&&k[t].externalConnections&&k[t]?k[t].id:t},J=function(t,e){if(!t||e>10)N.debug("Opting out, no graph ");else{N.debug("Opting in, graph "),t.nodes().forEach((function(e){t.children(e).length>0&&(N.warn("Cluster identified",e," Replacement id in edges: ",_(e,t)),D[e]=P(e,t),k[e]={id:_(e,t),clusterData:t.node(e)})})),t.nodes().forEach((function(e){var r=t.children(e),n=t.edges();r.length>0?(N.debug("Cluster identified",e,D),n.forEach((function(t){t.v!==e&&t.w!==e&&(B(t.v,e)^B(t.w,e)&&(N.warn("Edge: ",t," leaves cluster ",e),N.warn("Descendants of XXX ",e,": ",D[e]),k[e].externalConnections=!0))}))):N.debug("Not a cluster ",e,D)}));for(var n=0,i=Object.keys(k);n<i.length;n++){var a=i[n],o=k[a].id,c=t.parent(o);c!==a&&k[c]&&!k[c].externalConnections&&(k[a].id=c)}t.edges().forEach((function(e){var r=t.edge(e);N.warn("Edge "+e.v+" -> "+e.w+": "+JSON.stringify(e)),N.warn("Edge "+e.v+" -> "+e.w+": "+JSON.stringify(t.edge(e)));var n=e.v,i=e.w;if(N.warn("Fix XXX",k,"ids:",e.v,e.w,"Translating: ",k[e.v]," --- ",k[e.w]),k[e.v]&&k[e.w]&&k[e.v]===k[e.w]){N.warn("Fixing and trixing link to self - removing XXX",e.v,e.w,e.name),N.warn("Fixing and trixing - removing XXX",e.v,e.w,e.name),n=F(e.v),i=F(e.w),t.removeEdge(e.v,e.w,e.name);var a=e.w+"---"+e.v;t.setNode(a,{domId:a,id:a,labelStyle:"",labelText:r.label,padding:0,shape:"labelRect",style:""});var o=structuredClone(r),c=structuredClone(r);o.label="",o.arrowTypeEnd="none",c.label="",o.fromCluster=e.v,c.toCluster=e.v,t.setEdge(n,a,o,e.name+"-cyclic-special"),t.setEdge(a,i,c,e.name+"-cyclic-special")}else if(k[e.v]||k[e.w]){if(N.warn("Fixing and trixing - removing XXX",e.v,e.w,e.name),n=F(e.v),i=F(e.w),t.removeEdge(e.v,e.w,e.name),n!==e.v){var s=t.parent(n);k[s].externalConnections=!0,r.fromCluster=e.v}if(i!==e.w){var u=t.parent(i);k[u].externalConnections=!0,r.toCluster=e.w}N.warn("Fix Replacing with XXX",n,i,e.name),t.setEdge(n,i,r,e.name)}})),N.warn("Adjusted Graph",r(t)),A(t,0),N.trace(k)}},A=function t(e,n){if(N.warn("extractor - ",n,r(e),e.children("D")),n>10)N.error("Bailing out");else{var a,o=e.nodes(),s=!1,u=i(o);try{for(u.s();!(a=u.n()).done;){var d=a.value,l=e.children(d);s=s||l.length>0}}catch(x){u.e(x)}finally{u.f()}if(s){N.debug("Nodes = ",o,n);var f,h=i(o);try{for(h.s();!(f=h.n()).done;){var g=f.value;if(N.debug("Extracting node",g,k,k[g]&&!k[g].externalConnections,!e.parent(g),e.node(g),e.children("D")," Depth ",n),k[g])if(!k[g].externalConnections&&e.children(g)&&e.children(g).length>0){N.warn("Cluster without external connections, without a parent and with children",g,n);var p="TB"===e.graph().rankdir?"LR":"TB";k[g]&&k[g].clusterData&&k[g].clusterData.dir&&(p=k[g].clusterData.dir,N.warn("Fixing dir",k[g].clusterData.dir,p));var v=new c({multigraph:!0,compound:!0}).setGraph({rankdir:p,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel((function(){return{}}));N.warn("Old graph before copy",r(e)),I(g,e,v,g),e.setNode(g,{clusterNode:!0,id:g,clusterData:k[g].clusterData,labelText:k[g].labelText,graph:v}),N.warn("New graph after copy node: (",g,")",r(v)),N.debug("Old graph after copy",r(e))}else N.warn("Cluster ** ",g," **not meeting the criteria !externalConnections:",!k[g].externalConnections," no parent: ",!e.parent(g)," children ",e.children(g)&&e.children(g).length>0,e.children("D"),n),N.debug(k);else N.debug("Not a cluster",g,n)}}catch(x){h.e(x)}finally{h.f()}o=e.nodes(),N.warn("New list of nodes",o);var y,w=i(o);try{for(w.s();!(y=w.n()).done;){var m=y.value,b=e.node(m);N.warn(" Now next level",m,b),b.clusterNode&&t(b.graph,n+1)}}catch(x){w.e(x)}finally{w.f()}}else N.debug("Done, no node has children",e.nodes())}},R=function t(e,r){if(0===r.length)return[];var n=Object.assign(r);return r.forEach((function(r){var i=e.children(r),o=t(e,i);n=[].concat(a(n),a(o))})),n},M=function(t){return R(t,t.children())},Y={rect:function(t,e){N.info("Creating subgraph rect for ",e.id,e);var r=L(),n=t.insert("g").attr("class","cluster"+(e.class?" "+e.class:"")).attr("id",e.id),i=n.insert("rect",":first-child"),a=O(r.flowchart.htmlLabels),o=n.insert("g").attr("class","cluster-label"),c="markdown"===e.labelType?C(o,e.labelText,{style:e.labelStyle,useHtmlLabels:a}):o.node().appendChild(E(e.labelText,e.labelStyle,void 0,!0)),s=c.getBBox();if(O(r.flowchart.htmlLabels)){var u=c.children[0],d=X(c);s=u.getBoundingClientRect(),d.attr("width",s.width),d.attr("height",s.height)}var l=0*e.padding,f=l/2,h=e.width<=s.width+l?s.width+l:e.width;e.width<=s.width+l?e.diff=(s.width-e.width)/2-e.padding/2:e.diff=-e.padding/2,N.trace("Data ",e,JSON.stringify(e)),i.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-h/2).attr("y",e.y-e.height/2-f).attr("width",h).attr("height",e.height+l);var g=v(r).subGraphTitleTopMargin;a?o.attr("transform","translate(".concat(e.x-s.width/2,", ").concat(e.y-e.height/2+g,")")):o.attr("transform","translate(".concat(e.x,", ").concat(e.y-e.height/2+g,")"));var p=i.node().getBBox();return e.width=p.width,e.height=p.height,e.intersect=function(t){return S(e,t)},n},roundedWithTitle:function(t,e){var r=L(),n=t.insert("g").attr("class",e.classes).attr("id",e.id),i=n.insert("rect",":first-child"),a=n.insert("g").attr("class","cluster-label"),o=n.append("rect"),c=a.node().appendChild(E(e.labelText,e.labelStyle,void 0,!0)),s=c.getBBox();if(O(r.flowchart.htmlLabels)){var u=c.children[0],d=X(c);s=u.getBoundingClientRect(),d.attr("width",s.width),d.attr("height",s.height)}s=c.getBBox();var l=0*e.padding,f=l/2,h=e.width<=s.width+e.padding?s.width+e.padding:e.width;e.width<=s.width+e.padding?e.diff=(s.width+0*e.padding-e.width)/2:e.diff=-e.padding/2,i.attr("class","outer").attr("x",e.x-h/2-f).attr("y",e.y-e.height/2-f).attr("width",h+l).attr("height",e.height+l),o.attr("class","inner").attr("x",e.x-h/2-f).attr("y",e.y-e.height/2-f+s.height-1).attr("width",h+l).attr("height",e.height+l-s.height-3);var g=v(r).subGraphTitleTopMargin;a.attr("transform","translate(".concat(e.x-s.width/2,", ").concat(e.y-e.height/2-e.padding/3+(O(r.flowchart.htmlLabels)?5:3)+g,")"));var p=i.node().getBBox();return e.height=p.height,e.intersect=function(t){return S(e,t)},n},noteGroup:function(t,e){var r=t.insert("g").attr("class","note-cluster").attr("id",e.id),n=r.insert("rect",":first-child"),i=0*e.padding,a=i/2;n.attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-e.width/2-a).attr("y",e.y-e.height/2-a).attr("width",e.width+i).attr("height",e.height+i).attr("fill","none");var o=n.node().getBBox();return e.width=o.width,e.height=o.height,e.intersect=function(t){return S(e,t)},r},divider:function(t,e){var r=t.insert("g").attr("class",e.classes).attr("id",e.id),n=r.insert("rect",":first-child"),i=0*e.padding,a=i/2;n.attr("class","divider").attr("x",e.x-e.width/2-a).attr("y",e.y-e.height/2).attr("width",e.width+i).attr("height",e.height+i);var o=n.node().getBBox();return e.width=o.width,e.height=o.height,e.diff=-e.padding/2,e.intersect=function(t){return S(e,t)},r}},H={},U=function(t,e){N.trace("Inserting cluster");var r=e.shape||"rect";H[e.id]=Y[r](t,e)},W=function(){var t=n(e().mark((function t(i,a,o,c,s,d){var l,b,x,E,S,L,O,X,C;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return N.info("Graph in recursive render: XXX",r(a),s),l=a.graph().rankdir,N.trace("Dir in recursive render - dir:",l),b=i.insert("g").attr("class","root"),a.nodes()?N.info("Recursive render XXX",a.nodes()):N.info("No nodes found for",a),a.edges().length>0&&N.trace("Recursive edges",a.edge(a.edges()[0])),x=b.insert("g").attr("class","clusters"),E=b.insert("g").attr("class","edgePaths"),S=b.insert("g").attr("class","edgeLabels"),L=b.insert("g").attr("class","nodes"),t.next=12,Promise.all(a.nodes().map(function(){var t=n(e().mark((function t(r){var n,i,u,p;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.node(r),void 0!==s&&(i=JSON.parse(JSON.stringify(s.clusterData)),N.info("Setting data for cluster XXX (",r,") ",i,s),a.setNode(s.id,i),a.parent(r)||(N.trace("Setting parent",r,s.id),a.setParent(r,s.id,i))),N.info("(Insert) Node XXX"+r+": "+JSON.stringify(a.node(r))),!n||!n.clusterNode){t.next=16;break}return N.info("Cluster identified",r,n.width,a.node(r)),t.next=7,W(L,n.graph,o,c,a.node(r),d);case 7:u=t.sent,p=u.elem,f(n,p),n.diff=u.diff||0,N.info("Node bounds (abc123)",r,n,n.width,n.x,n.y),h(p,n),N.warn("Recursive render complete ",p,n),t.next=25;break;case 16:if(!(a.children(r).length>0)){t.next=22;break}N.info("Cluster - the non recursive path XXX",r,n.id,n,a),N.info(_(n.id,a)),k[n.id]={id:_(n.id,a),node:n},t.next=25;break;case 22:return N.info("Node - the non recursive path",r,n.id,n),t.next=25,g(L,a.node(r),l);case 25:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 12:return a.edges().forEach((function(t){var e=a.edge(t.v,t.w,t.name);N.info("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(t)),N.info("Edge "+t.v+" -> "+t.w+": ",t," ",JSON.stringify(a.edge(t))),N.info("Fix",k,"ids:",t.v,t.w,"Translating: ",k[t.v],k[t.w]),p(S,e)})),a.edges().forEach((function(t){N.info("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(t))})),N.info("#############################################"),N.info("###                Layout                 ###"),N.info("#############################################"),N.info(a),u(a),N.info("Graph after layout:",r(a)),O=0,X=v(d),C=X.subGraphTitleTotalMargin,M(a).forEach((function(t){var e=a.node(t);N.info("Position "+t+": "+JSON.stringify(a.node(t))),N.info("Position "+t+": ("+e.x,","+e.y,") width: ",e.width," height: ",e.height),e&&e.clusterNode?(e.y+=C,y(e)):a.children(t).length>0?(e.height+=C,U(x,e),k[e.id].node=e):(e.y+=C/2,y(e))})),a.edges().forEach((function(t){var e=a.edge(t);N.info("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(e),e),e.points.forEach((function(t){return t.y+=C/2}));var r=w(E,t,e,k,o,a,c);m(e,r)})),a.nodes().forEach((function(t){var e=a.node(t);N.info(t,e.type,e.diff),"group"===e.type&&(O=e.diff)})),t.abrupt("return",{elem:b,diff:O});case 26:case"end":return t.stop()}}),t)})));return function(e,r,n,i,a,o){return t.apply(this,arguments)}}();t("r",function(){var t=n(e().mark((function t(n,i,a,o,c){var s;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l(n,a,o,c),b(),x(),H={},D={},G={},k={},N.warn("Graph at first:",JSON.stringify(r(i))),J(i),N.warn("Graph after:",JSON.stringify(r(i))),s=L(),t.next=11,W(n,i,o,c,void 0,s);case 11:case"end":return t.stop()}}),t)})));return function(e,r,n,i,a){return t.apply(this,arguments)}}())}}}))}();

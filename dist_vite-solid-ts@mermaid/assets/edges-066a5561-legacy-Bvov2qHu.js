!function(){function t(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t=function(){return e};var r,e={},a=Object.prototype,n=a.hasOwnProperty,i=Object.defineProperty||function(t,r,e){t[r]=e.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",d=o.toStringTag||"@@toStringTag";function h(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{h({},"")}catch(r){h=function(t,r,e){return t[r]=e}}function u(t,r,e,a){var n=r&&r.prototype instanceof v?r:v,o=Object.create(n.prototype),s=new j(a||[]);return i(o,"_invoke",{value:_(t,e,s)}),o}function p(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var f="suspendedStart",y="suspendedYield",g="executing",x="completed",w={};function v(){}function b(){}function m(){}var k={};h(k,c,(function(){return this}));var L=Object.getPrototypeOf,S=L&&L(L(O([])));S&&S!==a&&n.call(S,c)&&(k=S);var T=m.prototype=v.prototype=Object.create(k);function M(t){["next","throw","return"].forEach((function(r){h(t,r,(function(t){return this._invoke(r,t)}))}))}function E(t,r){function e(a,i,o,c){var l=p(t[a],t,i);if("throw"!==l.type){var d=l.arg,h=d.value;return h&&"object"==s(h)&&n.call(h,"__await")?r.resolve(h.__await).then((function(t){e("next",t,o,c)}),(function(t){e("throw",t,o,c)})):r.resolve(h).then((function(t){d.value=t,o(d)}),(function(t){return e("throw",t,o,c)}))}c(l.arg)}var a;i(this,"_invoke",{value:function(t,n){function i(){return new r((function(r,a){e(t,n,r,a)}))}return a=a?a.then(i,i):i()}})}function _(t,e,a){var n=f;return function(i,o){if(n===g)throw Error("Generator is already running");if(n===x){if("throw"===i)throw o;return{value:r,done:!0}}for(a.method=i,a.arg=o;;){var s=a.delegate;if(s){var c=B(s,a);if(c){if(c===w)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(n===f)throw n=x,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n=g;var l=p(t,e,a);if("normal"===l.type){if(n=a.done?x:y,l.arg===w)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(n=x,a.method="throw",a.arg=l.arg)}}}function B(t,e){var a=e.method,n=t.iterator[a];if(n===r)return e.delegate=null,"throw"===a&&t.iterator.return&&(e.method="return",e.arg=r,B(t,e),"throw"===e.method)||"return"!==a&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+a+"' method")),w;var i=p(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,w;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,w):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,w)}function C(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function P(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function O(t){if(t||""===t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function e(){for(;++a<t.length;)if(n.call(t,a))return e.value=t[a],e.done=!1,e;return e.value=r,e.done=!0,e};return i.next=i}}throw new TypeError(s(t)+" is not iterable")}return b.prototype=m,i(T,"constructor",{value:m,configurable:!0}),i(m,"constructor",{value:b,configurable:!0}),b.displayName=h(m,d,"GeneratorFunction"),e.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===b||"GeneratorFunction"===(r.displayName||r.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,h(t,d,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},M(E.prototype),h(E.prototype,l,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,a,n,i){void 0===i&&(i=Promise);var o=new E(u(t,r,a,n),i);return e.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},M(T),h(T,d,"Generator"),h(T,c,(function(){return this})),h(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var r=Object(t),e=[];for(var a in r)e.push(a);return e.reverse(),function t(){for(;e.length;){var a=e.pop();if(a in r)return t.value=a,t.done=!1,t}return t.done=!0,t}},e.values=O,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function a(a,n){return s.type="throw",s.arg=t,e.next=a,n&&(e.method="next",e.arg=r),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=r,i?(this.method="next",this.next=i.finallyLoc,w):this.complete(o)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),w},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),P(e),w}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var a=e.completion;if("throw"===a.type){var n=a.arg;P(e)}return n}}throw Error("illegal catch attempt")},delegateYield:function(t,e,a){return this.delegate={iterator:O(t),resultName:e,nextLoc:a},"next"===this.method&&(this.arg=r),w}},e}function r(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,r,e,a,n,i,o){try{var s=t[i](o),c=s.value}catch(t){return void e(t)}s.done?r(c):Promise.resolve(c).then(a,n)}function a(t){return function(){var r=this,a=arguments;return new Promise((function(n,i){var o=t.apply(r,a);function s(t){e(o,n,i,s,c,"next",t)}function c(t){e(o,n,i,s,c,"throw",t)}s(void 0)}))}}function n(t,r){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=i(t))||r&&t&&"number"==typeof t.length){e&&(t=e);var a=0,n=function(){};return{s:n,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return s=t.done,t},e:function(t){c=!0,o=t},f:function(){try{s||null==e.return||e.return()}finally{if(c)throw o}}}}function i(t,r){if(t){if("string"==typeof t)return o(t,r);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?o(t,r):void 0}}function o(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,a=Array(r);e<r;e++)a[e]=t[e];return a}function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}System_1.register(["./index-legacy-1oTS4qUV.js","./createText-ca0c5216-legacy-Ex0PljXK.js","./line-legacy-Dit4IbK6.js"],(function(e,i){"use strict";var o,c,l,d,h,u,p,f,y,g;return{setters:[function(t){o=t.p,c=t.c,l=t.d,d=t.b6,h=t.h,u=t.l,p=t.A,f=t.F},function(t){y=t.a},function(t){g=t.l}],execute:function(){var i={extension:function(t,r,e){u.trace("Making markers for ",e),t.append("defs").append("marker").attr("id",e+"_"+r+"-extensionStart").attr("class","marker extension "+r).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",e+"_"+r+"-extensionEnd").attr("class","marker extension "+r).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},composition:function(t,r,e){t.append("defs").append("marker").attr("id",e+"_"+r+"-compositionStart").attr("class","marker composition "+r).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",e+"_"+r+"-compositionEnd").attr("class","marker composition "+r).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},aggregation:function(t,r,e){t.append("defs").append("marker").attr("id",e+"_"+r+"-aggregationStart").attr("class","marker aggregation "+r).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",e+"_"+r+"-aggregationEnd").attr("class","marker aggregation "+r).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},dependency:function(t,r,e){t.append("defs").append("marker").attr("id",e+"_"+r+"-dependencyStart").attr("class","marker dependency "+r).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",e+"_"+r+"-dependencyEnd").attr("class","marker dependency "+r).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},lollipop:function(t,r,e){t.append("defs").append("marker").attr("id",e+"_"+r+"-lollipopStart").attr("class","marker lollipop "+r).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),t.append("defs").append("marker").attr("id",e+"_"+r+"-lollipopEnd").attr("class","marker lollipop "+r).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},point:function(t,r,e){t.append("marker").attr("id",e+"_"+r+"-pointEnd").attr("class","marker "+r).attr("viewBox","0 0 10 10").attr("refX",6).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",e+"_"+r+"-pointStart").attr("class","marker "+r).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},circle:function(t,r,e){t.append("marker").attr("id",e+"_"+r+"-circleEnd").attr("class","marker "+r).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",e+"_"+r+"-circleStart").attr("class","marker "+r).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},cross:function(t,r,e){t.append("marker").attr("id",e+"_"+r+"-crossEnd").attr("class","marker cross "+r).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",e+"_"+r+"-crossStart").attr("class","marker cross "+r).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},barb:function(t,r,e){t.append("defs").append("marker").attr("id",e+"_"+r+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")}};e("i",(function(t,r,e,a){r.forEach((function(r){i[r](t,e,a)}))}));var x=e("h",(function(t,r,e,a){var i=t||"";if("object"===s(i)&&(i=i[0]),o(c().flowchart.htmlLabels)){i=i.replace(/\\n|\n/g,"<br />"),u.debug("vertexText"+i);var l=function(t){var r,e,a=h(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),n=a.append("xhtml:div"),i=t.label,o=t.isNode?"nodeLabel":"edgeLabel";return n.html('<span class="'+o+'" '+(t.labelStyle?'style="'+t.labelStyle+'"':"")+">"+i+"</span>"),r=n,(e=t.labelStyle)&&r.attr("style",e),n.style("display","inline-block"),n.style("white-space","nowrap"),n.attr("xmlns","http://www.w3.org/1999/xhtml"),a.node()}({isNode:a,label:d(i).replace(/fa[blrs]?:fa-[\w-]+/g,(function(t){return"<i class='".concat(t.replace(":"," "),"'></i>")})),labelStyle:r.replace("fill:","color:")});return l}var p=document.createElementNS("http://www.w3.org/2000/svg","text");p.setAttribute("style",r.replace("color:","fill:"));var f,y=n("string"==typeof i?i.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(i)?i:[]);try{for(y.s();!(f=y.n()).done;){var g=f.value,x=document.createElementNS("http://www.w3.org/2000/svg","tspan");x.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),x.setAttribute("dy","1em"),x.setAttribute("x","0"),e?x.setAttribute("class","title-row"):x.setAttribute("class","row"),x.textContent=g.trim(),p.appendChild(x)}}catch(w){y.e(w)}finally{y.f()}return p})),w=e("l",function(){var e=a(t().mark((function e(a,n,i,s){var u,p,f,g,w,v,b,m,k,L,S,T,M;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(p=n.useHtmlLabels||o(c().flowchart.htmlLabels),u=i||"node default",f=a.insert("g").attr("class",u).attr("id",n.domId||n.id),g=f.insert("g").attr("class","label").attr("style",n.labelStyle),w=void 0===n.labelText?"":"string"==typeof n.labelText?n.labelText:n.labelText[0],v=g.node(),b="markdown"===n.labelType?y(g,l(d(w),c()),{useHtmlLabels:p,width:n.width||c().flowchart.wrappingWidth,classes:"markdown-node-label"}):v.appendChild(x(l(d(w),c()),n.labelStyle,!1,s)),m=b.getBBox(),k=n.padding/2,!o(c().flowchart.htmlLabels)){t.next=20;break}if(L=b.children[0],S=h(b),!(T=L.getElementsByTagName("img"))){t.next=17;break}return M=""===w.replace(/<img[^>]*>/g,"").trim(),t.next=17,Promise.all(r(T).map((function(t){return new Promise((function(r){function e(){if(t.style.display="flex",t.style.flexDirection="column",M){var e=c().fontSize?c().fontSize:window.getComputedStyle(document.body).fontSize,a=5*parseInt(e,10)+"px";t.style.minWidth=a,t.style.maxWidth=a}else t.style.width="100%";r(t)}setTimeout((function(){t.complete&&e()})),t.addEventListener("error",e),t.addEventListener("load",e)}))})));case 17:m=L.getBoundingClientRect(),S.attr("width",m.width),S.attr("height",m.height);case 20:return p?g.attr("transform","translate("+-m.width/2+", "+-m.height/2+")"):g.attr("transform","translate(0, "+-m.height/2+")"),n.centerLabel&&g.attr("transform","translate("+-m.width/2+", "+-m.height/2+")"),g.insert("rect",":first-child"),t.abrupt("return",{shapeSvg:f,bbox:m,halfPadding:k,label:g});case 24:case"end":return t.stop()}}),e)})));return function(t,r,a,n){return e.apply(this,arguments)}}()),v=e("u",(function(t,r){var e=r.node().getBBox();t.width=e.width,t.height=e.height}));function b(t,r,e,a){return t.insert("polygon",":first-child").attr("points",a.map((function(t){return t.x+","+t.y})).join(" ")).attr("class","label-container").attr("transform","translate("+-r/2+","+e/2+")")}function m(t,r,e,a){var n=t.x,i=t.y,o=n-a.x,s=i-a.y,c=Math.sqrt(r*r*s*s+e*e*o*o),l=Math.abs(r*e*o/c);a.x<n&&(l=-l);var d=Math.abs(r*e*s/c);return a.y<i&&(d=-d),{x:n+l,y:i+d}}function k(t,r,e,a){var n,i,o,s,c,l,d,h,u,p,f,y,g;if(n=r.y-t.y,o=t.x-r.x,c=r.x*t.y-t.x*r.y,u=n*e.x+o*e.y+c,p=n*a.x+o*a.y+c,!(0!==u&&0!==p&&L(u,p)||(i=a.y-e.y,s=e.x-a.x,l=a.x*e.y-e.x*a.y,d=i*t.x+s*t.y+l,h=i*r.x+s*r.y+l,0!==d&&0!==h&&L(d,h)||0==(f=n*s-i*o))))return y=Math.abs(f/2),{x:(g=o*l-s*c)<0?(g-y)/f:(g+y)/f,y:(g=i*c-n*l)<0?(g-y)/f:(g+y)/f}}function L(t,r){return t*r>0}var S={node:function(t,r){return t.intersect(r)},circle:function(t,r,e){return m(t,r,r,e)},ellipse:m,polygon:function(t,r,e){var a=t.x,n=t.y,i=[],o=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY;"function"==typeof r.forEach?r.forEach((function(t){o=Math.min(o,t.x),s=Math.min(s,t.y)})):(o=Math.min(o,r.x),s=Math.min(s,r.y));for(var c=a-t.width/2-o,l=n-t.height/2-s,d=0;d<r.length;d++){var h=r[d],u=r[d<r.length-1?d+1:0],p=k(t,e,{x:c+h.x,y:l+h.y},{x:c+u.x,y:l+u.y});p&&i.push(p)}return i.length?(i.length>1&&i.sort((function(t,r){var a=t.x-e.x,n=t.y-e.y,i=Math.sqrt(a*a+n*n),o=r.x-e.x,s=r.y-e.y,c=Math.sqrt(o*o+s*s);return i<c?-1:i===c?0:1})),i[0]):t},rect:e("j",(function(t,r){var e,a,n=t.x,i=t.y,o=r.x-n,s=r.y-i,c=t.width/2,l=t.height/2;return Math.abs(s)*c>Math.abs(o)*l?(s<0&&(l=-l),e=0===s?0:l*o/s,a=l):(o<0&&(c=-c),e=c,a=0===o?0:c*s/o),{x:n+e,y:i+a}}))},T=function(){var r=a(t().mark((function r(e,a){var n,i,o,s,l;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.useHtmlLabels||c().flowchart.htmlLabels||(a.centerLabel=!0),t.next=4,w(e,a,"node "+a.classes,!0);case 4:return n=t.sent,i=n.shapeSvg,o=n.bbox,s=n.halfPadding,u.info("Classes = ",a.classes),(l=i.insert("rect",":first-child")).attr("rx",a.rx).attr("ry",a.ry).attr("x",-o.width/2-s).attr("y",-o.height/2-s).attr("width",o.width+a.padding).attr("height",o.height+a.padding),v(a,l),a.intersect=function(t){return S.rect(a,t)},t.abrupt("return",i);case 14:case"end":return t.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),M=T,E=function(t,r,e){var a=function(t){var r,e=new Set,a=n(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;switch(i){case"x":e.add("right"),e.add("left");break;case"y":e.add("up"),e.add("down");break;default:e.add(i)}}}catch(o){a.e(o)}finally{a.f()}return e}(t),i=r.height+2*e.padding,o=i/2,s=r.width+2*o+e.padding,c=e.padding/2;return a.has("right")&&a.has("left")&&a.has("up")&&a.has("down")?[{x:0,y:0},{x:o,y:0},{x:s/2,y:2*c},{x:s-o,y:0},{x:s,y:0},{x:s,y:-i/3},{x:s+2*c,y:-i/2},{x:s,y:-2*i/3},{x:s,y:-i},{x:s-o,y:-i},{x:s/2,y:-i-2*c},{x:o,y:-i},{x:0,y:-i},{x:0,y:-2*i/3},{x:-2*c,y:-i/2},{x:0,y:-i/3}]:a.has("right")&&a.has("left")&&a.has("up")?[{x:o,y:0},{x:s-o,y:0},{x:s,y:-i/2},{x:s-o,y:-i},{x:o,y:-i},{x:0,y:-i/2}]:a.has("right")&&a.has("left")&&a.has("down")?[{x:0,y:0},{x:o,y:-i},{x:s-o,y:-i},{x:s,y:0}]:a.has("right")&&a.has("up")&&a.has("down")?[{x:0,y:0},{x:s,y:-o},{x:s,y:-i+o},{x:0,y:-i}]:a.has("left")&&a.has("up")&&a.has("down")?[{x:s,y:0},{x:0,y:-o},{x:0,y:-i+o},{x:s,y:-i}]:a.has("right")&&a.has("left")?[{x:o,y:0},{x:o,y:-c},{x:s-o,y:-c},{x:s-o,y:0},{x:s,y:-i/2},{x:s-o,y:-i},{x:s-o,y:-i+c},{x:o,y:-i+c},{x:o,y:-i},{x:0,y:-i/2}]:a.has("up")&&a.has("down")?[{x:s/2,y:0},{x:0,y:-c},{x:o,y:-c},{x:o,y:-i+c},{x:0,y:-i+c},{x:s/2,y:-i},{x:s,y:-i+c},{x:s-o,y:-i+c},{x:s-o,y:-c},{x:s,y:-c}]:a.has("right")&&a.has("up")?[{x:0,y:0},{x:s,y:-o},{x:0,y:-i}]:a.has("right")&&a.has("down")?[{x:0,y:0},{x:s,y:0},{x:0,y:-i}]:a.has("left")&&a.has("up")?[{x:s,y:0},{x:0,y:-o},{x:s,y:-i}]:a.has("left")&&a.has("down")?[{x:s,y:0},{x:0,y:0},{x:s,y:-i}]:a.has("right")?[{x:o,y:-c},{x:o,y:-c},{x:s-o,y:-c},{x:s-o,y:0},{x:s,y:-i/2},{x:s-o,y:-i},{x:s-o,y:-i+c},{x:o,y:-i+c},{x:o,y:-i+c}]:a.has("left")?[{x:o,y:0},{x:o,y:-c},{x:s-o,y:-c},{x:s-o,y:-i+c},{x:o,y:-i+c},{x:o,y:-i},{x:0,y:-i/2}]:a.has("up")?[{x:o,y:-c},{x:o,y:-i+c},{x:0,y:-i+c},{x:s/2,y:-i},{x:s,y:-i+c},{x:s-o,y:-i+c},{x:s-o,y:-c}]:a.has("down")?[{x:s/2,y:0},{x:0,y:-c},{x:o,y:-c},{x:o,y:-i+c},{x:s-o,y:-i+c},{x:s-o,y:-c},{x:s,y:-c}]:[{x:0,y:0}]},_=function(t){return t?" "+t:""},B=function(t,r){return"node default".concat(_(t.classes)," ").concat(_(t.class))},C=function(){var r=a(t().mark((function r(e,a){var n,i,o,s,c,l,d,h;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e,a,B(a),!0);case 2:return n=t.sent,i=n.shapeSvg,o=n.bbox,s=o.width+a.padding,c=o.height+a.padding,d=[{x:(l=s+c)/2,y:0},{x:l,y:-l/2},{x:l/2,y:-l},{x:0,y:-l/2}],u.info("Question main (Circle)"),(h=b(i,l,l,d)).attr("style",a.style),v(a,h),a.intersect=function(t){return u.warn("Intersect called"),S.polygon(a,d,t)},t.abrupt("return",i);case 15:case"end":return t.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),P=function(){var r=a(t().mark((function r(e,a){var n,i,o,s,c,l,d,h;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e,a,B(a),!0);case 2:return n=t.sent,i=n.shapeSvg,o=n.bbox,4,s=o.height+a.padding,c=s/4,l=o.width+2*c+a.padding,(h=b(i,l,s,d=[{x:c,y:0},{x:l-c,y:0},{x:l,y:-s/2},{x:l-c,y:-s},{x:c,y:-s},{x:0,y:-s/2}])).attr("style",a.style),v(a,h),a.intersect=function(t){return S.polygon(a,d,t)},t.abrupt("return",i);case 15:case"end":return t.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),j=function(){var r=a(t().mark((function r(e,a){var n,i,o,s,c,l,d,h;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e,a,void 0,!0);case 2:return n=t.sent,i=n.shapeSvg,o=n.bbox,2,s=o.height+2*a.padding,c=s/2,l=o.width+2*c+a.padding,d=E(a.directions,o,a),(h=b(i,l,s,d)).attr("style",a.style),v(a,h),a.intersect=function(t){return S.polygon(a,d,t)},t.abrupt("return",i);case 15:case"end":return t.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),O=function(){var r=a(t().mark((function r(e,a){var n,i,o,s,c,l;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e,a,B(a),!0);case 2:return n=t.sent,i=n.shapeSvg,o=n.bbox,s=o.width+a.padding,c=o.height+a.padding,b(i,s,c,l=[{x:-c/2,y:0},{x:s,y:0},{x:s,y:-c},{x:-c/2,y:-c},{x:0,y:-c/2}]).attr("style",a.style),a.width=s+c,a.height=c,a.intersect=function(t){return S.polygon(a,l,t)},t.abrupt("return",i);case 14:case"end":return t.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),I=function(){var r=a(t().mark((function r(e,a){var n,i,o,s,c,l,d;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e,a,B(a),!0);case 2:return n=t.sent,i=n.shapeSvg,o=n.bbox,s=o.width+a.padding,c=o.height+a.padding,(d=b(i,s,c,l=[{x:-2*c/6,y:0},{x:s-c/6,y:0},{x:s+2*c/6,y:-c},{x:c/6,y:-c}])).attr("style",a.style),v(a,d),a.intersect=function(t){return S.polygon(a,l,t)},t.abrupt("return",i);case 13:case"end":return t.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),N=function(){var r=a(t().mark((function r(e,a){var n,i,o,s,c,l,d;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e,a,B(a),!0);case 2:return n=t.sent,i=n.shapeSvg,o=n.bbox,s=o.width+a.padding,c=o.height+a.padding,(d=b(i,s,c,l=[{x:2*c/6,y:0},{x:s+c/6,y:0},{x:s-2*c/6,y:-c},{x:-c/6,y:-c}])).attr("style",a.style),v(a,d),a.intersect=function(t){return S.polygon(a,l,t)},t.abrupt("return",i);case 13:case"end":return t.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),A=function(){var r=a(t().mark((function r(e,a){var n,i,o,s,c,l,d;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e,a,B(a),!0);case 2:return n=t.sent,i=n.shapeSvg,o=n.bbox,s=o.width+a.padding,c=o.height+a.padding,(d=b(i,s,c,l=[{x:-2*c/6,y:0},{x:s+2*c/6,y:0},{x:s-c/6,y:-c},{x:c/6,y:-c}])).attr("style",a.style),v(a,d),a.intersect=function(t){return S.polygon(a,l,t)},t.abrupt("return",i);case 13:case"end":return t.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),Y=function(){var r=a(t().mark((function r(e,a){var n,i,o,s,c,l,d;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e,a,B(a),!0);case 2:return n=t.sent,i=n.shapeSvg,o=n.bbox,s=o.width+a.padding,c=o.height+a.padding,(d=b(i,s,c,l=[{x:c/6,y:0},{x:s-c/6,y:0},{x:s+2*c/6,y:-c},{x:-2*c/6,y:-c}])).attr("style",a.style),v(a,d),a.intersect=function(t){return S.polygon(a,l,t)},t.abrupt("return",i);case 13:case"end":return t.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),R=function(){var r=a(t().mark((function r(e,a){var n,i,o,s,c,l,d;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e,a,B(a),!0);case 2:return n=t.sent,i=n.shapeSvg,o=n.bbox,s=o.width+a.padding,c=o.height+a.padding,(d=b(i,s,c,l=[{x:0,y:0},{x:s+c/2,y:0},{x:s,y:-c/2},{x:s+c/2,y:-c},{x:0,y:-c}])).attr("style",a.style),v(a,d),a.intersect=function(t){return S.polygon(a,l,t)},t.abrupt("return",i);case 13:case"end":return t.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),W=function(){var r=a(t().mark((function r(e,a){var n,i,o,s,c,l,d,h,u;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e,a,B(a),!0);case 2:return n=t.sent,i=n.shapeSvg,o=n.bbox,s=o.width+a.padding,l=(c=s/2)/(2.5+s/50),d=o.height+l+a.padding,h="M 0,"+l+" a "+c+","+l+" 0,0,0 "+s+" 0 a "+c+","+l+" 0,0,0 "+-s+" 0 l 0,"+d+" a "+c+","+l+" 0,0,0 "+s+" 0 l 0,"+-d,u=i.attr("label-offset-y",l).insert("path",":first-child").attr("style",a.style).attr("d",h).attr("transform","translate("+-s/2+","+-(d/2+l)+")"),v(a,u),a.intersect=function(t){var r=S.rect(a,t),e=r.x-a.x;if(0!=c&&(Math.abs(e)<a.width/2||Math.abs(e)==a.width/2&&Math.abs(r.y-a.y)>a.height/2-l)){var n=l*l*(1-e*e/(c*c));0!=n&&(n=Math.sqrt(n)),n=l-n,t.y-a.y>0&&(n=-n),r.y+=n}return r},t.abrupt("return",i);case 14:case"end":return t.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),X=function(){var r=a(t().mark((function r(e,a){var n,i,o,s,c,l,d,h,p,f;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e,a,"node "+a.classes+" "+a.class,!0);case 2:return n=t.sent,i=n.shapeSvg,o=n.bbox,s=n.halfPadding,c=i.insert("rect",":first-child"),l=a.positioned?a.width:o.width+a.padding,d=a.positioned?a.height:o.height+a.padding,h=a.positioned?-l/2:-o.width/2-s,p=a.positioned?-d/2:-o.height/2-s,c.attr("class","basic label-container").attr("style",a.style).attr("rx",a.rx).attr("ry",a.ry).attr("x",h).attr("y",p).attr("width",l).attr("height",d),a.props&&(f=new Set(Object.keys(a.props)),a.props.borders&&(U(c,a.props.borders,l,d),f.delete("borders")),f.forEach((function(t){u.warn("Unknown node property ".concat(t))}))),v(a,c),a.intersect=function(t){return S.rect(a,t)},t.abrupt("return",i);case 16:case"end":return t.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),H=function(){var r=a(t().mark((function r(e,a){var n,i,o,s,c,l,d,h,p,f;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e,a,"node "+a.classes,!0);case 2:return n=t.sent,i=n.shapeSvg,o=n.bbox,s=n.halfPadding,c=i.insert("rect",":first-child"),l=a.positioned?a.width:o.width+a.padding,d=a.positioned?a.height:o.height+a.padding,h=a.positioned?-l/2:-o.width/2-s,p=a.positioned?-d/2:-o.height/2-s,c.attr("class","basic cluster composite label-container").attr("style",a.style).attr("rx",a.rx).attr("ry",a.ry).attr("x",h).attr("y",p).attr("width",l).attr("height",d),a.props&&(f=new Set(Object.keys(a.props)),a.props.borders&&(U(c,a.props.borders,l,d),f.delete("borders")),f.forEach((function(t){u.warn("Unknown node property ".concat(t))}))),v(a,c),a.intersect=function(t){return S.rect(a,t)},t.abrupt("return",i);case 16:case"end":return t.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),D=function(){var r=a(t().mark((function r(e,a){var n,i,o,s;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e,a,"label",!0);case 2:return n=t.sent,i=n.shapeSvg,u.trace("Classes = ",a.class),o=i.insert("rect",":first-child"),0,0,o.attr("width",0).attr("height",0),i.attr("class","label edgeLabel"),a.props&&(s=new Set(Object.keys(a.props)),a.props.borders&&(U(o,a.props.borders,0,0),s.delete("borders")),s.forEach((function(t){u.warn("Unknown node property ".concat(t))}))),v(a,o),a.intersect=function(t){return S.rect(a,t)},t.abrupt("return",i);case 14:case"end":return t.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}();function U(t,r,e,a){var n=[],i=function(t){n.push(t,0)},o=function(t){n.push(0,t)};r.includes("t")?(u.debug("add top border"),i(e)):o(e),r.includes("r")?(u.debug("add right border"),i(a)):o(a),r.includes("b")?(u.debug("add bottom border"),i(e)):o(e),r.includes("l")?(u.debug("add left border"),i(a)):o(a),t.attr("stroke-dasharray",n.join(" "))}var G=function(){var r=a(t().mark((function r(e,a){var n,i,o,s,c,l;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e,a,B(a),!0);case 2:return n=t.sent,i=n.shapeSvg,o=n.bbox,s=o.height+a.padding,c=o.width+s/4+a.padding,l=i.insert("rect",":first-child").attr("style",a.style).attr("rx",s/2).attr("ry",s/2).attr("x",-c/2).attr("y",-s/2).attr("width",c).attr("height",s),v(a,l),a.intersect=function(t){return S.rect(a,t)},t.abrupt("return",i);case 11:case"end":return t.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),Z=function(){var r=a(t().mark((function r(e,a){var n,i,o,s,c;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e,a,B(a),!0);case 2:return n=t.sent,i=n.shapeSvg,o=n.bbox,s=n.halfPadding,(c=i.insert("circle",":first-child")).attr("style",a.style).attr("rx",a.rx).attr("ry",a.ry).attr("r",o.width/2+s).attr("width",o.width+a.padding).attr("height",o.height+a.padding),u.info("Circle main"),v(a,c),a.intersect=function(t){return u.info("Circle intersect",a,o.width/2+s,t),S.circle(a,o.width/2+s,t)},t.abrupt("return",i);case 12:case"end":return t.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),F=function(){var r=a(t().mark((function r(e,a){var n,i,o,s,c,l,d;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e,a,B(a),!0);case 2:return n=t.sent,i=n.shapeSvg,o=n.bbox,s=n.halfPadding,5,c=i.insert("g",":first-child"),l=c.insert("circle"),d=c.insert("circle"),c.attr("class",a.class),l.attr("style",a.style).attr("rx",a.rx).attr("ry",a.ry).attr("r",o.width/2+s+5).attr("width",o.width+a.padding+10).attr("height",o.height+a.padding+10),d.attr("style",a.style).attr("rx",a.rx).attr("ry",a.ry).attr("r",o.width/2+s).attr("width",o.width+a.padding).attr("height",o.height+a.padding),u.info("DoubleCircle main"),v(a,l),a.intersect=function(t){return u.info("DoubleCircle intersect",a,o.width/2+s+5,t),S.circle(a,o.width/2+s+5,t)},t.abrupt("return",i);case 17:case"end":return t.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),q=function(){var r=a(t().mark((function r(e,a){var n,i,o,s,c,l,d;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e,a,B(a),!0);case 2:return n=t.sent,i=n.shapeSvg,o=n.bbox,s=o.width+a.padding,c=o.height+a.padding,(d=b(i,s,c,l=[{x:0,y:0},{x:s,y:0},{x:s,y:-c},{x:0,y:-c},{x:0,y:0},{x:-8,y:0},{x:s+8,y:0},{x:s+8,y:-c},{x:-8,y:-c},{x:-8,y:0}])).attr("style",a.style),v(a,d),a.intersect=function(t){return S.polygon(a,l,t)},t.abrupt("return",i);case 13:case"end":return t.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),z=function(t,r,e){var a=t.insert("g").attr("class","node default").attr("id",r.domId||r.id),n=70,i=10;"LR"===e&&(n=10,i=70);var o=a.append("rect").attr("x",-1*n/2).attr("y",-1*i/2).attr("width",n).attr("height",i).attr("class","fork-join");return v(r,o),r.height=r.height+r.padding/2,r.width=r.width+r.padding/2,r.intersect=function(t){return S.rect(r,t)},a},V={rhombus:C,composite:H,question:C,rect:X,labelRect:D,rectWithTitle:function(t,r){var e;e=r.classes?"node "+r.classes:"node default";var a=t.insert("g").attr("class",e).attr("id",r.domId||r.id),n=a.insert("rect",":first-child"),i=a.insert("line"),l=a.insert("g").attr("class","label"),d=r.labelText.flat?r.labelText.flat():r.labelText,p="";p="object"===s(d)?d[0]:d,u.info("Label text abc79",p,d,"object"===s(d));var f=l.node().appendChild(x(p,r.labelStyle,!0,!0)),y={width:0,height:0};if(o(c().flowchart.htmlLabels)){var g=f.children[0],w=h(f);y=g.getBoundingClientRect(),w.attr("width",y.width),w.attr("height",y.height)}u.info("Text 2",d);var b=d.slice(1,d.length),m=f.getBBox(),k=l.node().appendChild(x(b.join?b.join("<br/>"):b,r.labelStyle,!0,!0));if(o(c().flowchart.htmlLabels)){var L=k.children[0],T=h(k);y=L.getBoundingClientRect(),T.attr("width",y.width),T.attr("height",y.height)}var M=r.padding/2;return h(k).attr("transform","translate( "+(y.width>m.width?0:(m.width-y.width)/2)+", "+(m.height+M+5)+")"),h(f).attr("transform","translate( "+(y.width<m.width?0:-(m.width-y.width)/2)+", 0)"),y=l.node().getBBox(),l.attr("transform","translate("+-y.width/2+", "+(-y.height/2-M+3)+")"),n.attr("class","outer title-state").attr("x",-y.width/2-M).attr("y",-y.height/2-M).attr("width",y.width+r.padding).attr("height",y.height+r.padding),i.attr("class","divider").attr("x1",-y.width/2-M).attr("x2",y.width/2+M).attr("y1",-y.height/2-M+m.height+M).attr("y2",-y.height/2-M+m.height+M),v(r,n),r.intersect=function(t){return S.rect(r,t)},a},choice:function(t,r){var e=t.insert("g").attr("class","node default").attr("id",r.domId||r.id),a=[{x:0,y:14},{x:14,y:0},{x:0,y:-14},{x:-14,y:0}];return e.insert("polygon",":first-child").attr("points",a.map((function(t){return t.x+","+t.y})).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),r.width=28,r.height=28,r.intersect=function(t){return S.circle(r,14,t)},e},circle:Z,doublecircle:F,stadium:G,hexagon:P,block_arrow:j,rect_left_inv_arrow:O,lean_right:I,lean_left:N,trapezoid:A,inv_trapezoid:Y,rect_right_inv_arrow:R,cylinder:W,start:function(t,r){var e=t.insert("g").attr("class","node default").attr("id",r.domId||r.id),a=e.insert("circle",":first-child");return a.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),v(r,a),r.intersect=function(t){return S.circle(r,7,t)},e},end:function(t,r){var e=t.insert("g").attr("class","node default").attr("id",r.domId||r.id),a=e.insert("circle",":first-child"),n=e.insert("circle",":first-child");return n.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),a.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),v(r,n),r.intersect=function(t){return S.circle(r,7,t)},e},note:M,subroutine:q,fork:z,join:z,class_box:function(t,r){var e,a=r.padding/2;e=r.classes?"node "+r.classes:"node default";var n=t.insert("g").attr("class",e).attr("id",r.domId||r.id),i=n.insert("rect",":first-child"),s=n.insert("line"),l=n.insert("line"),d=0,u=4,p=n.insert("g").attr("class","label"),f=0,y=r.classData.annotations&&r.classData.annotations[0],g=r.classData.annotations[0]?"«"+r.classData.annotations[0]+"»":"",w=p.node().appendChild(x(g,r.labelStyle,!0,!0)),b=w.getBBox();if(o(c().flowchart.htmlLabels)){var m=w.children[0],k=h(w);b=m.getBoundingClientRect(),k.attr("width",b.width),k.attr("height",b.height)}r.classData.annotations[0]&&(u+=b.height+4,d+=b.width);var L=r.classData.label;void 0!==r.classData.type&&""!==r.classData.type&&(c().flowchart.htmlLabels?L+="&lt;"+r.classData.type+"&gt;":L+="<"+r.classData.type+">");var T=p.node().appendChild(x(L,r.labelStyle,!0,!0));h(T).attr("class","classTitle");var M=T.getBBox();if(o(c().flowchart.htmlLabels)){var E=T.children[0],_=h(T);M=E.getBoundingClientRect(),_.attr("width",M.width),_.attr("height",M.height)}u+=M.height+4,M.width>d&&(d=M.width);var B=[];r.classData.members.forEach((function(t){var e=t.getDisplayDetails(),a=e.displayText;c().flowchart.htmlLabels&&(a=a.replace(/</g,"&lt;").replace(/>/g,"&gt;"));var n=p.node().appendChild(x(a,e.cssStyle?e.cssStyle:r.labelStyle,!0,!0)),i=n.getBBox();if(o(c().flowchart.htmlLabels)){var s=n.children[0],l=h(n);i=s.getBoundingClientRect(),l.attr("width",i.width),l.attr("height",i.height)}i.width>d&&(d=i.width),u+=i.height+4,B.push(n)})),u+=8;var C=[];if(r.classData.methods.forEach((function(t){var e=t.getDisplayDetails(),a=e.displayText;c().flowchart.htmlLabels&&(a=a.replace(/</g,"&lt;").replace(/>/g,"&gt;"));var n=p.node().appendChild(x(a,e.cssStyle?e.cssStyle:r.labelStyle,!0,!0)),i=n.getBBox();if(o(c().flowchart.htmlLabels)){var s=n.children[0],l=h(n);i=s.getBoundingClientRect(),l.attr("width",i.width),l.attr("height",i.height)}i.width>d&&(d=i.width),u+=i.height+4,C.push(n)})),u+=8,y){var P=(d-b.width)/2;h(w).attr("transform","translate( "+(-1*d/2+P)+", "+-1*u/2+")"),f=b.height+4}var j=(d-M.width)/2;return h(T).attr("transform","translate( "+(-1*d/2+j)+", "+(-1*u/2+f)+")"),f+=M.height+4,s.attr("class","divider").attr("x1",-d/2-a).attr("x2",d/2+a).attr("y1",-u/2-a+8+f).attr("y2",-u/2-a+8+f),f+=8,B.forEach((function(t){var r;h(t).attr("transform","translate( "+-d/2+", "+(-1*u/2+f+4)+")");var e=null==t?void 0:t.getBBox();f+=(null!==(r=null==e?void 0:e.height)&&void 0!==r?r:0)+4})),f+=8,l.attr("class","divider").attr("x1",-d/2-a).attr("x2",d/2+a).attr("y1",-u/2-a+8+f).attr("y2",-u/2-a+8+f),f+=8,C.forEach((function(t){var r;h(t).attr("transform","translate( "+-d/2+", "+(-1*u/2+f)+")");var e=null==t?void 0:t.getBBox();f+=(null!==(r=null==e?void 0:e.height)&&void 0!==r?r:0)+4})),i.attr("style",r.style).attr("class","outer title-state").attr("x",-d/2-a).attr("y",-u/2-a).attr("width",d+r.padding).attr("height",u+r.padding),v(r,i),r.intersect=function(t){return S.rect(r,t)},n}},Q={},J=(e("a",function(){var r=a(t().mark((function r(e,a,n){var i,o,s;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.link){t.next=8;break}return"sandbox"===c().securityLevel?s="_top":a.linkTarget&&(s=a.linkTarget||"_blank"),i=e.insert("svg:a").attr("xlink:href",a.link).attr("target",s),t.next=5,V[a.shape](i,a,n);case 5:o=t.sent,t.next=12;break;case 8:return t.next=10,V[a.shape](e,a,n);case 10:o=t.sent,i=o;case 12:return a.tooltip&&o.attr("title",a.tooltip),a.class&&o.attr("class","node default "+a.class),i.attr("data-node","true"),i.attr("data-id",a.id),Q[a.id]=i,a.haveCallback&&Q[a.id].attr("class",Q[a.id].attr("class")+" clickable"),t.abrupt("return",i);case 19:case"end":return t.stop()}}),r)})));return function(t,e,a){return r.apply(this,arguments)}}()),e("s",(function(t,r){Q[r.id]=t})),e("e",(function(){Q={}})),e("p",(function(t){var r=Q[t.id];u.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");var e=t.diff||0;return t.clusterNode?r.attr("transform","translate("+(t.x+e-t.width/2)+", "+(t.y-t.height/2-8)+")"):r.attr("transform","translate("+t.x+", "+t.y+")"),e})),e("g",(function(t){var r,e,a,n,i=t.flowchart,o=null!==(r=null==(a=null==i?void 0:i.subGraphTitleMargin)?void 0:a.top)&&void 0!==r?r:0,s=null!==(e=null==(n=null==i?void 0:i.subGraphTitleMargin)?void 0:n.bottom)&&void 0!==e?e:0;return{subGraphTitleTopMargin:o,subGraphTitleBottomMargin:s,subGraphTitleTotalMargin:o+s}}))),$={aggregation:18,extension:18,composition:18,dependency:6,lollipop:13.5,arrow_point:5.3};function K(t,r){if(void 0===t||void 0===r)return{angle:0,deltaX:0,deltaY:0};t=tt(t),r=tt(r);var e=[t.x,t.y],a=e[0],n=e[1],i=[r.x,r.y],o=i[0]-a,s=i[1]-n;return{angle:Math.atan(s/o),deltaX:o,deltaY:s}}var tt=function(t){return Array.isArray(t)?{x:t[0],y:t[1]}:t},rt=e("k",(function(t){return{x:function(r,e,a){var n=0;if(0===e&&Object.hasOwn($,t.arrowTypeStart)){var i=K(a[0],a[1]),o=i.angle,s=i.deltaX;n=$[t.arrowTypeStart]*Math.cos(o)*(s>=0?1:-1)}else if(e===a.length-1&&Object.hasOwn($,t.arrowTypeEnd)){var c=K(a[a.length-1],a[a.length-2]),l=c.angle,d=c.deltaX;n=$[t.arrowTypeEnd]*Math.cos(l)*(d>=0?1:-1)}return tt(r).x+n},y:function(r,e,a){var n=0;if(0===e&&Object.hasOwn($,t.arrowTypeStart)){var i=K(a[0],a[1]),o=i.angle,s=i.deltaY;n=$[t.arrowTypeStart]*Math.abs(Math.sin(o))*(s>=0?1:-1)}else if(e===a.length-1&&Object.hasOwn($,t.arrowTypeEnd)){var c=K(a[a.length-1],a[a.length-2]),l=c.angle,d=c.deltaY;n=$[t.arrowTypeEnd]*Math.abs(Math.sin(l))*(d>=0?1:-1)}return tt(r).y+n}}})),et=e("m",(function(t,r,e,a,n){r.arrowTypeStart&&nt(t,"start",r.arrowTypeStart,e,a,n),r.arrowTypeEnd&&nt(t,"end",r.arrowTypeEnd,e,a,n)})),at={arrow_cross:"cross",arrow_point:"point",arrow_barb:"barb",arrow_circle:"circle",aggregation:"aggregation",extension:"extension",composition:"composition",dependency:"dependency",lollipop:"lollipop"},nt=function(t,r,e,a,n,i){var o=at[e];if(o){var s="start"===r?"Start":"End";t.attr("marker-".concat(r),"url(".concat(a,"#").concat(n,"_").concat(i,"-").concat(o).concat(s,")"))}else u.warn("Unknown arrow type: ".concat(e))},it={},ot={};e("f",(function(){it={},ot={}})),e("b",(function(t,r){var e=o(c().flowchart.htmlLabels),a="markdown"===r.labelType?y(t,r.label,{style:r.labelStyle,useHtmlLabels:e,addSvgBackground:!0}):x(r.label,r.labelStyle),n=t.insert("g").attr("class","edgeLabel"),i=n.insert("g").attr("class","label");i.node().appendChild(a);var s,l=a.getBBox();if(e){var d=a.children[0],u=h(a);l=d.getBoundingClientRect(),u.attr("width",l.width),u.attr("height",l.height)}if(i.attr("transform","translate("+-l.width/2+", "+-l.height/2+")"),it[r.id]=n,r.width=l.width,r.height=l.height,r.startLabelLeft){var p=x(r.startLabelLeft,r.labelStyle),f=t.insert("g").attr("class","edgeTerminals"),g=f.insert("g").attr("class","inner");s=g.node().appendChild(p);var w=p.getBBox();g.attr("transform","translate("+-w.width/2+", "+-w.height/2+")"),ot[r.id]||(ot[r.id]={}),ot[r.id].startLeft=f,st(s,r.startLabelLeft)}if(r.startLabelRight){var v=x(r.startLabelRight,r.labelStyle),b=t.insert("g").attr("class","edgeTerminals"),m=b.insert("g").attr("class","inner");s=b.node().appendChild(v),m.node().appendChild(v);var k=v.getBBox();m.attr("transform","translate("+-k.width/2+", "+-k.height/2+")"),ot[r.id]||(ot[r.id]={}),ot[r.id].startRight=b,st(s,r.startLabelRight)}if(r.endLabelLeft){var L=x(r.endLabelLeft,r.labelStyle),S=t.insert("g").attr("class","edgeTerminals"),T=S.insert("g").attr("class","inner");s=T.node().appendChild(L);var M=L.getBBox();T.attr("transform","translate("+-M.width/2+", "+-M.height/2+")"),S.node().appendChild(L),ot[r.id]||(ot[r.id]={}),ot[r.id].endLeft=S,st(s,r.endLabelLeft)}if(r.endLabelRight){var E=x(r.endLabelRight,r.labelStyle),_=t.insert("g").attr("class","edgeTerminals"),B=_.insert("g").attr("class","inner");s=B.node().appendChild(E);var C=E.getBBox();B.attr("transform","translate("+-C.width/2+", "+-C.height/2+")"),_.node().appendChild(E),ot[r.id]||(ot[r.id]={}),ot[r.id].endRight=_,st(s,r.endLabelRight)}return a}));function st(t,r){c().flowchart.htmlLabels&&t&&(t.style.width=9*r.length+"px",t.style.height="12px")}e("d",(function(t,r){u.debug("Moving label abc88 ",t.id,t.label,it[t.id],r);var e=r.updatedPath?r.updatedPath:r.originalPath,a=c(),n=J(a).subGraphTitleTotalMargin;if(t.label){var i=it[t.id],o=t.x,s=t.y;if(e){var l=p.calcLabelPosition(e);u.debug("Moving label "+t.label+" from (",o,",",s,") to (",l.x,",",l.y,") abc88"),r.updatedPath&&(o=l.x,s=l.y)}i.attr("transform","translate(".concat(o,", ").concat(s+n/2,")"))}if(t.startLabelLeft){var d=ot[t.id].startLeft,h=t.x,f=t.y;if(e){var y=p.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_left",e);h=y.x,f=y.y}d.attr("transform","translate(".concat(h,", ").concat(f,")"))}if(t.startLabelRight){var g=ot[t.id].startRight,x=t.x,w=t.y;if(e){var v=p.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_right",e);x=v.x,w=v.y}g.attr("transform","translate(".concat(x,", ").concat(w,")"))}if(t.endLabelLeft){var b=ot[t.id].endLeft,m=t.x,k=t.y;if(e){var L=p.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_left",e);m=L.x,k=L.y}b.attr("transform","translate(".concat(m,", ").concat(k,")"))}if(t.endLabelRight){var S=ot[t.id].endRight,T=t.x,M=t.y;if(e){var E=p.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_right",e);T=E.x,M=E.y}S.attr("transform","translate(".concat(T,", ").concat(M,")"))}}));var ct=function(t,r){u.debug("abc88 cutPathAtIntersect",t,r);var e=[],a=t[0],n=!1;return t.forEach((function(t){if(function(t,r){var e=t.x,a=t.y,n=Math.abs(r.x-e),i=Math.abs(r.y-a),o=t.width/2,s=t.height/2;return n>=o||i>=s}(r,t)||n)a=t,n||e.push(t);else{var i=function(t,r,e){u.debug("intersection calc abc89:\n  outsidePoint: ".concat(JSON.stringify(r),"\n  insidePoint : ").concat(JSON.stringify(e),"\n  node        : x:").concat(t.x," y:").concat(t.y," w:").concat(t.width," h:").concat(t.height));var a=t.x,n=t.y,i=Math.abs(a-e.x),o=t.width/2,s=e.x<r.x?o-i:o+i,c=t.height/2,l=Math.abs(r.y-e.y),d=Math.abs(r.x-e.x);if(Math.abs(n-r.y)*o>Math.abs(a-r.x)*c){var h=e.y<r.y?r.y-c-n:n-c-r.y;s=d*h/l;var p={x:e.x<r.x?e.x+s:e.x-d+s,y:e.y<r.y?e.y+l-h:e.y-l+h};return 0===s&&(p.x=r.x,p.y=r.y),0===d&&(p.x=r.x),0===l&&(p.y=r.y),u.debug("abc89 topp/bott calc, Q ".concat(l,", q ").concat(h,", R ").concat(d,", r ").concat(s),p),p}var f=l*(s=e.x<r.x?r.x-o-a:a-o-r.x)/d,y=e.x<r.x?e.x+d-s:e.x-d+s,g=e.y<r.y?e.y+f:e.y-f;return u.debug("sides calc abc89, Q ".concat(l,", q ").concat(f,", R ").concat(d,", r ").concat(s),{_x:y,_y:g}),0===s&&(y=r.x,g=r.y),0===d&&(y=r.x),0===l&&(g=r.y),{x:y,y:g}}(r,a,t),o=!1;e.forEach((function(t){o=o||t.x===i.x&&t.y===i.y})),e.some((function(t){return t.x===i.x&&t.y===i.y}))||e.push(i),n=!0}})),e};e("c",(function(t,r,e,a,n,i,o){var s=e.points;u.debug("abc88 InsertEdge: edge=",e,"e=",r);var l=!1,d=i.node(r.v),h=i.node(r.w);(null==h?void 0:h.intersect)&&(null==d?void 0:d.intersect)&&((s=s.slice(1,e.points.length-1)).unshift(d.intersect(s[0])),s.push(h.intersect(s[s.length-1]))),e.toCluster&&(u.debug("to cluster abc88",a[e.toCluster]),s=ct(e.points,a[e.toCluster].node),l=!0),e.fromCluster&&(u.debug("from cluster abc88",a[e.fromCluster]),s=ct(s.reverse(),a[e.fromCluster].node).reverse(),l=!0);var p=s.filter((function(t){return!Number.isNaN(t.y)})),y=f;!e.curve||"graph"!==n&&"flowchart"!==n||(y=e.curve);var x,w=rt(e),v=w.x,b=w.y,m=g().x(v).y(b).curve(y);switch(e.thickness){case"normal":x="edge-thickness-normal";break;case"thick":case"invisible":x="edge-thickness-thick";break;default:x=""}switch(e.pattern){case"solid":x+=" edge-pattern-solid";break;case"dotted":x+=" edge-pattern-dotted";break;case"dashed":x+=" edge-pattern-dashed"}var k=t.append("path").attr("d",m(p)).attr("id",e.id).attr("class"," "+x+(e.classes?" "+e.classes:"")).attr("style",e.style),L="";(c().flowchart.arrowMarkerAbsolute||c().state.arrowMarkerAbsolute)&&(L=(L=(L=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search).replace(/\(/g,"\\(")).replace(/\)/g,"\\)")),et(k,e,L,o,n);var S={};return l&&(S.updatedPath=s),S.originalPath=e.points,S}))}}}))}();
